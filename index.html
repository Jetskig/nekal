<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ne Kaldı?</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-slide-in-up {
      animation: slideInUp 0.6s ease-out forwards;
    }
    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .animate-scale-in {
      animation: scaleIn 0.3s ease forwards;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden text-white">

  <!-- Animated backgrounds -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
    <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse delay-2000"></div>
    <div class="absolute top-40 left-1/2 w-60 h-60 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse delay-4000"></div>
  </div>

  <div class="relative z-10 container mx-auto px-4 py-8 max-w-4xl">

    <div class="text-center mb-12">
      <h1 class="text-6xl font-bold bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent mb-4 animate-fade-in">
        Ne Kaldı?
      </h1>
      <p class="text-purple-200 text-lg opacity-80">
        Önemli anlarına geri sayım yap
      </p>
    </div>

    <!-- Events list -->
    <div id="events-list" class="space-y-4 mb-8">
      <!-- Dinamik etkinlikler buraya gelecek -->
    </div>

    <!-- Empty message -->
    <div id="empty-msg" class="text-center py-12 hidden">
      <div class="text-6xl mb-4 opacity-50">⏰</div>
      <p class="text-purple-200 text-lg opacity-70">Henüz etkinlik eklemedin. İlk etkinliğini ekle!</p>
    </div>

    <!-- Add Button -->
    <button id="add-btn" class="fixed bottom-8 right-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full p-4 shadow-2xl transform hover:scale-110 transition-all duration-300 hover:shadow-purple-500/25"
      style="box-shadow: 0 0 30px rgba(168, 85, 247, 0.4);">
      +
    </button>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 hidden">
      <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-8 max-w-md w-full shadow-2xl border border-purple-500/20 transform animate-scale-in">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-white">Yeni Etkinlik</h2>
          <button id="modal-close" class="text-gray-400 hover:text-white transition-colors duration-200 hover:bg-red-500/20 rounded-full p-2">X</button>
        </div>

        <div class="space-y-6">
          <div>
            <label class="block text-purple-200 mb-2 text-sm font-medium">Etkinlik Adı</label>
            <input type="text" id="event-name" class="w-full bg-slate-700/50 border border-purple-500/30 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-all duration-200" placeholder="Etkinlik adını girin..." />
          </div>

          <div>
            <label class="block text-purple-200 mb-2 text-sm font-medium flex items-center gap-2">Tarih</label>
            <input type="date" id="event-date" class="w-full bg-slate-700/50 border border-purple-500/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-all duration-200" />
          </div>

          <div>
            <label class="block text-purple-200 mb-2 text-sm font-medium flex items-center gap-2">Saat (Opsiyonel)</label>
            <input type="time" id="event-time" class="w-full bg-slate-700/50 border border-purple-500/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-all duration-200" />
          </div>

          <div>
            <label class="block text-purple-200 mb-3 text-sm font-medium">Renk Seçimi</label>
            <div class="flex gap-4">
              <button class="w-8 h-8 rounded-full bg-blue-500 border-4 border-transparent hover:border-white transition-colors duration-200" data-color="blue" aria-label="Mavi"></button>
              <button class="w-8 h-8 rounded-full bg-green-500 border-4 border-transparent hover:border-white transition-colors duration-200" data-color="green" aria-label="Yeşil"></button>
              <button class="w-8 h-8 rounded-full bg-purple-500 border-4 border-transparent hover:border-white transition-colors duration-200" data-color="purple" aria-label="Mor"></button>
              <button class="w-8 h-8 rounded-full bg-orange-500 border-4 border-transparent hover:border-white transition-colors duration-200" data-color="orange" aria-label="Turuncu"></button>
              <button class="w-8 h-8 rounded-full bg-pink-500 border-4 border-transparent hover:border-white transition-colors duration-200" data-color="pink" aria-label="Pembe"></button>
            </div>
          </div>

          <button id="add-event-btn" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl py-3 font-semibold text-white hover:brightness-110 transition-all duration-200 shadow-lg">
            Ekle
          </button>
        </div>
      </div>
    </div>

  </div>

  <script>
    // Başlangıç etkinlikleri
    let events = [
      { id: 1, name: "Yılbaşı", date: "2026-01-01", time: "00:00", color: "orange" },
      { id: 2, name: "Doğum Günü", date: "2025-09-06", time: "15:30", color: "green" }
    ];

    const eventsList = document.getElementById('events-list');
    const emptyMsg = document.getElementById('empty-msg');
    const modal = document.getElementById('modal');
    const addBtn = document.getElementById('add-btn');
    const modalClose = document.getElementById('modal-close');
    const addEventBtn = document.getElementById('add-event-btn');

    const eventNameInput = document.getElementById('event-name');
    const eventDateInput = document.getElementById('event-date');
    const eventTimeInput = document.getElementById('event-time');
    const colorButtons = modal.querySelectorAll('button[data-color]');
    let selectedColor = 'blue';

    // Renk seçimi
    colorButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        selectedColor = btn.getAttribute('data-color');
        colorButtons.forEach(b => b.style.borderColor = 'transparent');
        btn.style.borderColor = 'white';
      });
    });
    colorButtons[0].style.borderColor = 'white';

    // Modal aç/kapa
    addBtn.addEventListener('click', () => {
      modal.style.display = 'flex';
    });
    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });

    function closeModal() {
      modal.style.display = 'none';
      eventNameInput.value = '';
      eventDateInput.value = '';
      eventTimeInput.value = '';
      selectedColor = 'blue';
      colorButtons.forEach(b => b.style.borderColor = 'transparent');
      colorButtons[0].style.borderColor = 'white';
    }

    // Etkinlik ekleme
    addEventBtn.addEventListener('click', () => {
      const name = eventNameInput.value.trim();
      const date = eventDateInput.value;
      const time = eventTimeInput.value || "00:00";

      if (!name) {
        alert("Lütfen etkinlik adını girin.");
        return;
      }
      if (!date) {
        alert("Lütfen tarih seçin.");
        return;
      }

      const id = Date.now();

      events.push({ id, name, date, time, color: selectedColor });
      closeModal();
      renderEvents();
    });

    // Etkinlikleri render et
    function renderEvents() {
      eventsList.innerHTML = '';

      if (events.length === 0) {
        emptyMsg.classList.remove('hidden');
        return;
      } else {
        emptyMsg.classList.add('hidden');
      }

      events.forEach(event => {
        const eventEl = document.createElement('div');
        eventEl.className = `p-6 rounded-3xl border border-purple-500/30 bg-gradient-to-br from-slate-800 to-slate-900 shadow-xl flex justify-between items-center gap-4 relative overflow-hidden`;

        // Gradient arka plan renklerine göre ayarla
        let fromColor = '';
        let toColor = '';
        switch (event.color) {
          case 'blue':
            fromColor = 'from-blue-600';
            toColor = 'to-blue-800';
            break;
          case 'green':
            fromColor = 'from-green-600';
            toColor = 'to-green-800';
            break;
          case 'purple':
            fromColor = 'from-purple-600';
            toColor = 'to-purple-800';
            break;
          case 'orange':
            fromColor = 'from-orange-600';
            toColor = 'to-orange-800';
            break;
          case 'pink':
            fromColor = 'from-pink-600';
            toColor = 'to-pink-800';
            break;
          default:
            fromColor = 'from-purple-600';
            toColor = 'to-purple-800';
        }
        eventEl.classList.add(fromColor, toColor);

        // Zaman farkını hesapla
        const now = new Date();
        const targetDate = new Date(`${event.date}T${event.time}:00`);
        const diffMs = targetDate - now;

        if (diffMs <= 0) {
          eventEl.innerHTML = `<div class="text-xl font-semibold">${event.name}</div><div class="text-sm text-red-400">Zaman doldu!</div>`;
          eventsList.appendChild(eventEl);
          return;
        }

        const diff = msToTime(diffMs);

        // İlerleme çubuğu yüzdesi
        const totalDurationMs = targetDate - new Date(now.getFullYear(), 0, 1);
        const progressPercent = Math.min(100, Math.max(0, 100 - (diffMs / totalDurationMs) * 100));

        eventEl.innerHTML = `
          <div class="flex flex-col">
            <div class="text-xl font-semibold">${event.name}</div>
            <div class="text-sm opacity-80">${formatDate(event.date)} ${event.time !== "00:00" ? event.time : ''}</div>
          </div>
          <div class="text-right font-mono text-lg tabular-nums min-w-[170px] select-none">
            ${diff.years > 0 ? diff.years + ' yıl ' : ''}${diff.months > 0 ? diff.months + ' ay ' : ''}${diff.days} gün<br />
            ${pad(diff.hours)}:${pad(diff.minutes)}:${pad(diff.seconds)}
          </div>
          <div class="absolute bottom-0 left-0 h-1 rounded-b-3xl" style="width: ${progressPercent}%; background: linear-gradient(90deg, rgba(255,255,255,0.7), rgba(255,255,255,0.2));"></div>
        `;

        eventsList.appendChild(eventEl);
      });
    }

    // Yardımcı fonksiyonlar
    function msToTime(duration) {
      let seconds = Math.floor((duration / 1000) % 60);
      let minutes = Math.floor((duration / (1000 * 60)) % 60);
      let hours = Math.floor((duration / (1000 * 60 * 60)) % 24);
      let daysTotal = Math.floor(duration / (1000 * 60 * 60 * 24));

      // Basit olarak ay ve yıl hesabı (kaba, sadece 30 gün ay ve 365 gün yıl sayıyor)
      let years = Math.floor(daysTotal / 365);
      let daysLeftAfterYears = daysTotal % 365;
      let months = Math.floor(daysLeftAfterYears / 30);
      let days = daysLeftAfterYears % 30;

      return { years, months, days, hours, minutes, seconds };
    }

    function pad(num) {
      return num.toString().padStart(2, '0');
    }

    function formatDate(dateStr) {
      const d = new Date(dateStr);
      return d.toLocaleDateString('tr-TR', { day: '2-digit', month: 'short', year: 'numeric' });
    }

    // Sürekli güncelleme
    setInterval(renderEvents, 1000);

    renderEvents();
  </script>

</body>
</html>
